(function(n){function u(){this._items=[]}var i={getYPosition:function(t,i){if(tr.container.attr("data-notify-adjust")!="scroll")return i.getYPosition(tr.notifier);var r=i.getYPosition(tr.notifier),u=r+n(document).scrollTop()-tr.container.position().top;return u<0?r:u}},r={show:function(){var u=n(this),t=u.data("notify"),r,f;t&&(tr.notifier.trigger("beforeshow",{element:this,settings:tr.settings}),r=n.notify.queue[tr.container.attr("data-notify-id")],r.add(tr.notifier)?(f=i.getYPosition(t,r),tr.notifier.position().top!=f&&tr.notifier.animate({top:f},{queue:!1}),tr.settings.widthAdjust&&(tr.notifier.width(""),tr.settings.widthAdjust=!1)):(tr.notifier.show().animate({opacity:tr.settings.opacity},tr.settings.animationDuration,function(){n(this).trigger("aftershow",{element:u[0],settings:tr.settings})}).css({top:i.getYPosition(t,r)}),tr.settings.displayTime&&!tr.settings.sticky&&setTimeout(function(){u.trigger("hide")},tr.settings.displayTime)),tr.notifier.outerWidth(!0)>n(document).width()&&(tr.settings.widthAdjust=!0,tr.notifier.outerWidth(n(window).width()-tr.notifier.css("padding-left").replace("px",""))),tr.container.attr("data-notify-adjust")=="content"&&r.isLast(tr.notifier)&&tr.container.animate({"padding-top":r.getHeight()},{queue:!1},tr.settings.animationDuration))},hide:function(){var i=n(this),t=i.data("notify");t&&tr.notifier.css("opacity")&&(tr.notifier.trigger("beforehide",{element:this,settings:tr.settings}),tr.notifier.animate({opacity:0},tr.settings.animationDuration,function(){var r=n(this);r.hide(),n.notify.queue[tr.container.attr("data-notify-id")].remove(tr.notifier),tr.container.attr("data-notify-adjust")=="content"&&tr.container.animate({"padding-top":n.notify.queue[tr.container.attr("data-notify-id")].getHeight()},{queue:!1},tr.settings.animationDuration),r.trigger("afterhide",{element:i[0],settings:tr.settings})}))}},t={init:function(t){var f={animationDuration:500,displayTime:3e3,appendTo:"body",autoShow:!0,closeText:"x",sticky:!1,style:"bar",type:"info",adjustContent:!1,adjustScroll:!1,notifyClass:"",opacity:1,beforeShow:null,beforeHide:null,afterShow:null,afterHide:null},e=t&&tr.type?tr.type:f.type,i=n.extend({},f,n.notify.settings[e]);return i=n.extend(i,t),i.type=n.notify.settings[e]?e:f.type,n(this).each(function(){var f=n(this),h=f.data("notify"),e,t,o,s;h||(e=n("<div />",{"class":"notify "+i.style+" "+i.type+(i.notifyClass?" "+i.notifyClass:""),"data-notifier-id":(new Date).getTime(),css:{display:"none",opacity:0,position:"absolute"}}).bind({update:function(){f.trigger("show")},beforeshow:i.beforeShow,beforehide:i.beforeHide,aftershow:i.afterShow,afterhide:i.afterHide}).append(n("<span />",{"class":"icon"})).append(n("<span />",{"class":"close",text:i.closeText,click:function(){f.trigger("hide")}})),f.bind({show:r.show,hide:r.hide}),e.append(f),t=n(i.appendTo),tr.attr("data-notify-id")||(o=(new Date).getTime(),n.notify.queue[o]=new u,tr.attr("data-notify-id",o),s=tr.css("position"),s=="static"&&tr.css("position","relative"),i.adjustContent&&tr.attr("data-notify-adjust","content"),i.adjustScroll&&tr.attr("data-notify-adjust","scroll")),tr.append(e),f.data("notify",{settings:i,notifier:e,container:t}),i.autoShow&&f.trigger("show"))})},destroy:function(){return this.each(function(){var i=n(this),t=i.data("notify");t&&tr.notifier.remove()})},show:function(){return this.each(function(){var t=n(this).data("notify");t&&n(this).trigger("show")})},hide:function(){return this.each(function(){var t=n(this).data("notify");t&&n(this).trigger("hide")})}};n.fn.notify=function(i){var r=i;if(t[r])return t[r].apply(this,Array.prototype.slice.call(arguments,1));if(typeof r!="object"&&r)n.error("Method "+r+" does not exist on jQuery notify");else return tr.init.apply(this,arguments)},n.extend(u.prototype,{add:function(t){var i=n.inArray(t,this._items)>-1;return i||this._items.push(t),i},remove:function(t){var i=n.inArray(t,this._items);this._items.splice(i,1),this.update(i)},update:function(n){for(var r=n||0,i,t=r;t<this._items.length;t++)i=this._items[t],i&&i.length&&i.trigger("update")},getYPosition:function(n){for(var r=0,i,t=0;t<this._items.length;t++){if(i=this._items[t],i==n)break;r+=i.outerHeight(!0)}return r},getHeight:function(){for(var t=0,n=0;n<this._items.length;n++)t+=this._items[n].outerHeight(!0);return t},isLast:function(t){return n.inArray(t,this._items)==this._items.length-1}}),n.notify={queue:{},settings:{info:{},success:{sticky:!0,type:"success"},error:{sticky:!0,type:"error"},warning:{sticky:!0,type:"warning"}},create:function(t,i){return n("<span />",{text:t}).notify(i)}},n(window).resize(function(){for(var t in n.notify.queue)n.notify.queue[t].update()}),n(window).scroll(function(){for(var t in n.notify.queue)n.notify.queue[t].update()})})(jQuery);
